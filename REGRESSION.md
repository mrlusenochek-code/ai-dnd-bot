# Regression checklist (ИИ ДНД / ai-dnd-bot)

## Цель
Проверить, что после фиксов:
- ход/кнопка "Отправить" работает без ручных костылей со "Статус"
- список игроков не становится "пустым"
- init/roll/turn/pass/pause работают без исключений
- сервер и WS не падают, логи чистые

## Предусловия (WSL)
1) Активировать venv:
   source ~/venvs/ai-dnd-bot.venv/bin/activate

2) Загрузить env:
   set -a; source .env; set +a

3) База (если нужна):
   cd ~/code/ai-dnd-bot
   docker compose ps
   alembic upgrade head

4) Запуск сервера:
   python -m uvicorn app.web.server:app --host 127.0.0.1 --port 8000

## Ручной прогон (2 игрока + админ)
Сценарий:
1) Создать игру "S" (админ).
2) Подключить 2-го игрока.
3) Оба ставят ГОТОВ.
4) Старт игры — проверка, что первый ход норм.
5) На ходе игрока:
   - поле ввода активно
   - кнопка "Отправить" активируется сразу при вводе
   - не нужно нажимать "Статус" для активации
6) Передача хода туда-сюда:
   - сообщения проходят
   - "Следующий ход: игрок #..." соответствует реальности
7) Проверить команды:
   - pass/end на своём ходу: ход завершается
   - roll/adv/dis: бросок выводится, ход НЕ заканчивается
   - pause/resume: таймер/пауза не ломают ход
   - init (админ): не падает, не путает uuid/bigint

## Ожидаемые признаки успеха
- Нет ошибок/traceback в консоли uvicorn
- Нет “пустого состояния игроков” на фронте
- Кнопка "Отправить" не требует "Статус" для оживления

## Логи “золотого прогона” (пример)
(сюда можно вставлять последний успешный лог из консоли — коротким блоком,
чтобы сравнивать при будущих регрессиях)
